export ALAISES_PATH=~/bin/dotfiles/zsh/aliases

# Add home directory to the cd path.
CDPATH='.:~'

alias tm='open *.tmproj'

alias ..='cd ..'
alias cd..='cd ..'
alias ../..='..;..'
alias ../../..='..;..;..'
alias ../../../..='..;..;..;..'
alias ../../../../..='..;..;..;..;..'

alias ea='vim $ALAISES_PATH; reload'
alias reload='source $ALAISES_PATH'

alias l=ls\ -l
alias c=clear
alias cl=c\;l

# Utility
alias guid=uuidgen


# GIT
alias g=git\ status
alias gco=git\ checkout
alias gb=git\ branch
alias g/='cd ./$(git rev-parse --show-cdup)' # Go to the root of the git project.
alias cdg=g/
alias gd=git\ diff
alias ga=git\ add
alias gcm=git\ commit

# Rails
alias ss=script/server

alias cdd=cd\ -
alias j='open ~/.notes/blake/journal'
alias td='open ~/.notes/blake/todo'

# Turn this into a function, if the file does not exisit, create it.
alias todo='open ~/.notes/todo/$(basename `pwd`)'

# Removes trailing white space from files.
#
# Examples:
#  rtw `files db lib test app config public` # to remove trailing whitespace from all files in a rails app. 
rtw () {
  sed -i "" 's/[[:space:]]*$//' $*
}

# TODO, fix so it work from any place, not just the root of the git repo, seems like this identifies files that don't have whitespace issues too.
hastw () {
  git diff-index --check --cached HEAD | sed '/^[+1]/d' | sed 's/\:[0-9]*\:.*//' | uniq
}

# This one has no limit but should be slower, set up to use this as a fall back perhaps if the first one fails?
#rtw () {
#  for f in $*
#  do
#    sed -i "" 's/[[:space:]]*$//' $f
#  done
#}



# Identifies files with trailing white space.
tw () {
  grep -l '[[:space:]]*$' $*
}

ff () {
  # ff x find file named x
  find . -name $1 -print
}

# Finds all files not in hidden directories, includes files that are hidden.
files () {
  find $* \( ! -regex '.*/\..*/..*' \) -type f -print
}


# function to change directory to the one set in the last opened finder.
cdf () {
   currFolderPath=$( /usr/bin/osascript <<EOT
       tell application "Finder"
           try
               set currFolder to (folder of the front window as alias)
           on error
               set currFolder to (path to desktop folder as alias)
           end try
           POSIX path of currFolder
       end tell
   EOT
   )
   echo "cd to \"$currFolderPath\""
   cd "$currFolderPath"
}


# Use for switching directories, include command completion.
# hd bin = cd ~/bin
alias hd="cd ~/$*"

#hd() {
#  cd ~/$1
#}
#_hd_list () {
#  reply=(`ls ~`)
#}
#compctl -K _hd_list hd

